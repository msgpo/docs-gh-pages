<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <meta name="description" content=" ">

    <title>
	    AGL Developer Site - 
        
            
                JSON library for modern C++  -
            
        
    </title>

    <link rel="SHORTCUT ICON" href="/guppy/favicon.ico"/>

    

    
    

    <link rel="canonical" href="http://docs.automotivelinux.org/guppy/docs/devguides/en/dev/reference/afb-helpers/json.html">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/guppy/static/styles/main.css">
    <link rel="stylesheet" type="text/css" href="/guppy/static/styles/syntax.css">
    <!-- Algolia Search CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />

    <!-- Fonts -->
    <!-- For attribution information, see www/attributions.html -->
    <link href='https://fonts.googleapis.com/css?family=Raleway:700,400,300,700italic,400italic,300italic' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- <script defer type="text/javascript">
        var disqus_developer = ; // this would set it to developer mode
    </script>-->

    <!-- JS -->
    <script defer type="text/javascript" src="/guppy/static/js/lib/jquery-2.1.1.min.js"></script>
    <script defer type="text/javascript" src="/guppy/static/js/lib/bootstrap.min.js"></script>
<!--    <script defer type="text/javascript" src="/guppy/static/js/lib/ZeroClipboard.js"></script>-->

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', '{}', 'auto');
    ga('send', 'pageview');
</script>

</head>

<body>
    <header>
    <a class="scroll-point pt-top" name="top"></a>
    <nav class="navbar navbar-inverse navbar-fixed-top" style="background-color: #054458;">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="/"><img id="logo_top" src="/guppy/static/img/branding/agl_title_793x211.png"/></a>
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <div class="nav_bar_left">
                    <ul class="nav navbar-nav">
                        <li >
                            <a href="/guppy/docs/getting_started/en/dev/">Getting Started</a>
                        </li>
                                                
                        <li >
                            <a href="/guppy/docs/architecture/en/dev/">Architecture Guides</a>
                        </li>

                        <li >
                            <a href="/guppy/docs/hardware/en/dev/">Hardware Support</a>
                        </li>

                        <li >
                            <a href="/guppy/docs/devguides/en/dev/">Developer Guides</a>
                        </li>
                        
                        <li >
                            <a href="/guppy/docs/apis_services/en/dev/">APIs & Services</a>
                        </li>
					</ul>
				</div>
			    <div class="nav_bar_center">
                    <ul class="nav navbar-nav" style="margin-left: 5%;">
                        <li>
                        <a style="color:red;"><b>Guppy release documentation</b></a>
                        </li>
                    </ul>
                </div>
                <div class="nav_bar_right">
                    <ul class="nav navbar-nav">

                        <li >
                            <a href="/guppy/contribute">Contribute</a>
                        </li>
                        <li>
                            <form class="navbar-form navbar-right" id="header-search-form" role="search">
                                <div class="input-group">
                                    
                                    <input id="header-search-field" type="text" placeholder="Search 'dev' docs..." class="form-control hidden-xs" autocomplete="off">
                                </div>
                            </form>
                        </li>
                    </ul>
                </div>
            </div><!--/.navbar-collapse -->
        </div>
    </nav>
    <div id="_fixed_navbar_spacer" style="padding-top:50px"></div>
</header>














<div class="docs container">

    <!-- Table of Contents -->
    <div class="hidden-xs hidden-sm col-md-4 col-lg-3 site-toc-container">
        <ul class="site-toc">
    

    <li>
        
            <span class="toc-section-heading">
                Yocto layers
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/AGL.html">
                AGL Overview
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/meta-agl.html">
                meta-agl
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/meta-agl-demo.html">
                meta-agl-demo
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/meta-agl-devel.html">
                meta-agl-devel
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Host Configuration
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/host-configuration/docs/0_Abstract.html">
                Abstract
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/host-configuration/docs/1_Prerequisites.html">
                Prerequisites
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/host-configuration/docs/2_AGL_Application_Framework.html">
                AGL Application Framework
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/host-configuration/docs/3_Binding_Build_Example.html">
                Binding Build Example
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/host-configuration/docs/4_AGL_XDS.html">
                AGL XDS
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/host-configuration/docs/5_Candevstudio.html">
                CanDevStudio
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Usage of CMake Afb Template module
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/cmakeafbtemplates/0_Abstract.html">
                Abstract
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/cmakeafbtemplates/1_Quickstart.html">
                Quickstart
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/cmakeafbtemplates/2_project_architecture.html">
                Project architecture
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/cmakeafbtemplates/3_advanced_usage.html">
                Advanced usage
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/cmakeafbtemplates/4_advanced_customization.html">
                Advanced customization
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/cmakeafbtemplates/5_autobuild.html">
                The autobuild script
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                X(cross) Development System: User's Guide
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-1/0_Abstract.html">
                Getting Started
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Installing xds-server
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-1/1_install-xds-server.html">
                Installation
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-1/1-1_install-xds-server-docker.html">
                Based on Docker container
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-1/1-2_install-xds-server-vm.html">
                Based on Virtual Machine appliance
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-1/1-3_install-xds-server-native.html">
                Native installation
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-1/2_install-client.html">
                Installing xds client tools
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-1/3_install-sdks.html">
                Installing AGL SDKs
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Create your first AGL application
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-1/4_build-first-app.html">
                Prerequisites
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-1/4-1_build-first-app-setup.html">
                Setup
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-1/4-2_build-first-app-cmd.html">
                Build using command line tool
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-1/4-3_build-first-app-dashboard.html">
                Build using XDS Dashboard
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-1/4-4_build-first-app-ide.html">
                Build using a source code editor / IDE
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Debug your first AGL application
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-1/5_debug-first-app.html">
                Prerequisites
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-1/5-1_debug-first-app-config.html">
                Configuration
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-1/5-2_debug-first-app-cmd.html">
                xds-gdb from command line
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-1/5-3_debug-first-app-ide.html">
                xds-gdb within an IDE
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                X(cross) Development System: Internals
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/0_Abstract.html">
                Abstract
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/1_Prerequisites.html">
                Prerequisites
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                XDS-server
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/1_xds-server/0_abstract.html">
                Abstract
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/1_xds-server/1_build.html">
                Build from scratch
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/1_xds-server/2_config.html">
                Configuration
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/1_xds-server/3_how-to-run.html">
                How to run
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/1_xds-server/4_debug.html">
                Debugging
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/1_xds-server/5_test.html">
                Test
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                XDS-agent
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/2_xds-agent/0_abstract.html">
                Abstract
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/2_xds-agent/1_build.html">
                Build from scratch
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/2_xds-agent/2_config.html">
                Configuration
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/2_xds-agent/3_start.html">
                Start
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/2_xds-agent/4_debug.html">
                Debugging
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                XDS-cli
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/3_xds-cli/0_abstract.html">
                Abstract
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/3_xds-cli/1_build.html">
                Build from scratch
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/3_xds-cli/2_config.html">
                Configuration
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/3_xds-cli/3_commands.html">
                CLI Commands
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/3_xds-cli/4_debug.html">
                Debugging
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                XDS-gdb
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/4_xds-gdb/0_abstract.html">
                Abstract
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/4_xds-gdb/1_build.html">
                Build from scratch
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/4_xds-gdb/2_config.html">
                Configuration
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/xds/part-2/4_xds-gdb/3_debug.html">
                Debugging
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Guides
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/iotbzh2016/appfw/03-AGL-AppFW-Privileges-Management.pdf">
                AppFW - Privileges Management
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Controller Guide
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/ctrler/controller.html">
                Installation
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/ctrler/controllerConfig.html">
                Binding Configuration
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/ctrler/Usage.html">
                Usage
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/ctrler/configSample.html">
                Configuration Sample
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                AFB Helper functions reference
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/afb-helpers/usage.html">
                Usage
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/afb-helpers/afb-timer.html">
                AFB Timer
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/afb-helpers/curl-wrap.html">
                CURL wrapper
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/afb-helpers/escape.html">
                URL escaping
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/afb-helpers/filescan-utils.html">
                Filescan Utils
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/afb-helpers/qafbwebsocketclient.html">
                Qt AFB Websocket client
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/afb-helpers/json.html">
                JSON library for modern C++
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/afb-helpers/wrap-json.html">
                C JSON Wrapper
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Continuous Integration - Automated Testing (CIAT)
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <span class="toc-section-heading">
                Training
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/CIAT/training/How_to_write_your_own_tests_for_AGL.pdf">
                How to write tests (overview slides)
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/guppy/docs/devguides/en/dev/reference/CIAT/training/Hands_on_lab_documentation.pdf">
                How to write tests (detailed)
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    
</ul>

        
    </li>
    
</ul>

    </div>

    <!-- Page content -->
    <div class="col-md-8 col-md-offset-4 col-lg-9 col-lg-offset-3 page-content-container container">
        <div class="page-content row">
            <div class="col-md-offset-1 col-md-10">
                <div class="content-header">

                    <!-- ToC Dropdown (for XS and SM sizes only) -->
                    <div class="toc-dropdown dropdown visible-xs-block visible-sm-block">
                        <button class="btn btn-default dropdown-toggle" type="button" id="tocDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Table of Contents
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            






<li>
    <a class="" href="reference/AGL.html">
        AGL Overview
    </a>
</li>




<li>
    <a class="" href="reference/meta-agl.html">
        meta-agl
    </a>
</li>




<li>
    <a class="" href="reference/meta-agl-demo.html">
        meta-agl-demo
    </a>
</li>




<li>
    <a class="" href="reference/meta-agl-devel.html">
        meta-agl-devel
    </a>
</li>











<li>
    <a class="" href="reference/host-configuration/docs/0_Abstract.html">
        Abstract
    </a>
</li>




<li>
    <a class="" href="reference/host-configuration/docs/1_Prerequisites.html">
        Prerequisites
    </a>
</li>




<li>
    <a class="" href="reference/host-configuration/docs/2_AGL_Application_Framework.html">
        AGL Application Framework
    </a>
</li>




<li>
    <a class="" href="reference/host-configuration/docs/3_Binding_Build_Example.html">
        Binding Build Example
    </a>
</li>




<li>
    <a class="" href="reference/host-configuration/docs/4_AGL_XDS.html">
        AGL XDS
    </a>
</li>




<li>
    <a class="" href="reference/host-configuration/docs/5_Candevstudio.html">
        CanDevStudio
    </a>
</li>











<li>
    <a class="" href="reference/cmakeafbtemplates/0_Abstract.html">
        Abstract
    </a>
</li>




<li>
    <a class="" href="reference/cmakeafbtemplates/1_Quickstart.html">
        Quickstart
    </a>
</li>




<li>
    <a class="" href="reference/cmakeafbtemplates/2_project_architecture.html">
        Project architecture
    </a>
</li>




<li>
    <a class="" href="reference/cmakeafbtemplates/3_advanced_usage.html">
        Advanced usage
    </a>
</li>




<li>
    <a class="" href="reference/cmakeafbtemplates/4_advanced_customization.html">
        Advanced customization
    </a>
</li>




<li>
    <a class="" href="reference/cmakeafbtemplates/5_autobuild.html">
        The autobuild script
    </a>
</li>











<li>
    <a class="" href="reference/xds/part-1/0_Abstract.html">
        Getting Started
    </a>
</li>








<li>
    <a class="" href="reference/xds/part-1/1_install-xds-server.html">
        Installation
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-1/1-1_install-xds-server-docker.html">
        Based on Docker container
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-1/1-2_install-xds-server-vm.html">
        Based on Virtual Machine appliance
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-1/1-3_install-xds-server-native.html">
        Native installation
    </a>
</li>







<li>
    <a class="" href="reference/xds/part-1/2_install-client.html">
        Installing xds client tools
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-1/3_install-sdks.html">
        Installing AGL SDKs
    </a>
</li>








<li>
    <a class="" href="reference/xds/part-1/4_build-first-app.html">
        Prerequisites
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-1/4-1_build-first-app-setup.html">
        Setup
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-1/4-2_build-first-app-cmd.html">
        Build using command line tool
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-1/4-3_build-first-app-dashboard.html">
        Build using XDS Dashboard
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-1/4-4_build-first-app-ide.html">
        Build using a source code editor / IDE
    </a>
</li>











<li>
    <a class="" href="reference/xds/part-1/5_debug-first-app.html">
        Prerequisites
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-1/5-1_debug-first-app-config.html">
        Configuration
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-1/5-2_debug-first-app-cmd.html">
        xds-gdb from command line
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-1/5-3_debug-first-app-ide.html">
        xds-gdb within an IDE
    </a>
</li>














<li>
    <a class="" href="reference/xds/part-2/0_Abstract.html">
        Abstract
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/1_Prerequisites.html">
        Prerequisites
    </a>
</li>








<li>
    <a class="" href="reference/xds/part-2/1_xds-server/0_abstract.html">
        Abstract
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/1_xds-server/1_build.html">
        Build from scratch
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/1_xds-server/2_config.html">
        Configuration
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/1_xds-server/3_how-to-run.html">
        How to run
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/1_xds-server/4_debug.html">
        Debugging
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/1_xds-server/5_test.html">
        Test
    </a>
</li>











<li>
    <a class="" href="reference/xds/part-2/2_xds-agent/0_abstract.html">
        Abstract
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/2_xds-agent/1_build.html">
        Build from scratch
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/2_xds-agent/2_config.html">
        Configuration
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/2_xds-agent/3_start.html">
        Start
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/2_xds-agent/4_debug.html">
        Debugging
    </a>
</li>











<li>
    <a class="" href="reference/xds/part-2/3_xds-cli/0_abstract.html">
        Abstract
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/3_xds-cli/1_build.html">
        Build from scratch
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/3_xds-cli/2_config.html">
        Configuration
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/3_xds-cli/3_commands.html">
        CLI Commands
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/3_xds-cli/4_debug.html">
        Debugging
    </a>
</li>











<li>
    <a class="" href="reference/xds/part-2/4_xds-gdb/0_abstract.html">
        Abstract
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/4_xds-gdb/1_build.html">
        Build from scratch
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/4_xds-gdb/2_config.html">
        Configuration
    </a>
</li>




<li>
    <a class="" href="reference/xds/part-2/4_xds-gdb/3_debug.html">
        Debugging
    </a>
</li>














<li>
    <a class="" href="reference/iotbzh2016/appfw/03-AGL-AppFW-Privileges-Management.pdf">
        AppFW - Privileges Management
    </a>
</li>











<li>
    <a class="" href="reference/ctrler/controller.html">
        Installation
    </a>
</li>




<li>
    <a class="" href="reference/ctrler/controllerConfig.html">
        Binding Configuration
    </a>
</li>




<li>
    <a class="" href="reference/ctrler/Usage.html">
        Usage
    </a>
</li>




<li>
    <a class="" href="reference/ctrler/configSample.html">
        Configuration Sample
    </a>
</li>











<li>
    <a class="" href="reference/afb-helpers/usage.html">
        Usage
    </a>
</li>




<li>
    <a class="" href="reference/afb-helpers/afb-timer.html">
        AFB Timer
    </a>
</li>




<li>
    <a class="" href="reference/afb-helpers/curl-wrap.html">
        CURL wrapper
    </a>
</li>




<li>
    <a class="" href="reference/afb-helpers/escape.html">
        URL escaping
    </a>
</li>




<li>
    <a class="" href="reference/afb-helpers/filescan-utils.html">
        Filescan Utils
    </a>
</li>




<li>
    <a class="" href="reference/afb-helpers/qafbwebsocketclient.html">
        Qt AFB Websocket client
    </a>
</li>




<li>
    <a class="" href="reference/afb-helpers/json.html">
        JSON library for modern C++
    </a>
</li>




<li>
    <a class="" href="reference/afb-helpers/wrap-json.html">
        C JSON Wrapper
    </a>
</li>















<li>
    <a class="" href="reference/CIAT/training/How_to_write_your_own_tests_for_AGL.pdf">
        How to write tests (overview slides)
    </a>
</li>




<li>
    <a class="" href="reference/CIAT/training/Hands_on_lab_documentation.pdf">
        How to write tests (detailed)
    </a>
</li>










                        </ul>
                    </div>

                    <!--
                    
                    
                        <a class="edit" href=""><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</a>

                    
                    
                    -->

                    <!-- Language dropdown -->
                    <!--
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="languageDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            
                            <span class="caret"></span>
                        </button>

                        <!-- List all languages - ->
                        <ul class="dropdown-menu" aria-labelledby="languageDropdown">
                            
                        </ul>
                    </div>
                    -->

                    <!-- Version dropdown -->
                    <!--
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="versionDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            dev
                            
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="versionDropdown">

                            <!-- List versions available in this language - ->
                            
                        </ul>
                    </div>
                    -->
                </div>
                

                
                
                

                
                

                <!-- Show warnings for special versions -->
                <!-- dev warning
                
                    <div class="alert docs-alert alert-info" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        Draft version of documentation under development may change!
                        <a href="/guppy/docs/devguides/en/dev/reference/afb-helpers/json.html">
                            Click here for the latest released version.
                        </a>
                    </div>
                
                -->

                <!-- outdated warning
                
                -->


                <div id="page-toc-source">
                    <!-- WARNING: This file is generated by fetch_docs.js using /w/workspace/daily-jjb-doc-multiversion-update/docs-webtemplate/guppy/content/tocs_guppy/devguides/fetched_files.yml -->

<h1 id="json-for-modern-c">JSON for Modern C++</h1>

<ul>
  <li><a href="#design-goals">Design goals</a></li>
  <li><a href="#integration">Integration</a></li>
  <li><a href="#examples">Examples</a>
    <ul>
      <li><a href="#json-as-first-class-data-type">JSON as first-class data type</a></li>
      <li><a href="#serialization--deserialization">Serialization / Deserialization</a></li>
      <li><a href="#stl-like-access">STL-like access</a></li>
      <li><a href="#conversion-from-stl-containers">Conversion from STL containers</a></li>
      <li><a href="#json-pointer-and-json-patch">JSON Pointer and JSON Patch</a></li>
      <li><a href="#implicit-conversions">Implicit conversions</a></li>
      <li><a href="#arbitrary-types-conversions">Conversions to/from arbitrary types</a></li>
      <li><a href="#binary-formats-cbor-and-messagepack">Binary formats (CBOR and MessagePack)</a></li>
    </ul>
  </li>
  <li><a href="#supported-compilers">Supported compilers</a></li>
  <li><a href="#license">License</a></li>
  <li><a href="#thanks">Thanks</a></li>
  <li><a href="#used-third-party-tools">Used third-party tools</a></li>
  <li><a href="#projects-using-json-for-modern-c">Projects using JSON for Modern C++</a></li>
  <li><a href="#notes">Notes</a></li>
  <li><a href="#execute-unit-tests">Execute unit tests</a></li>
</ul>

<h2 id="design-goals">Design goals</h2>

<p>There are myriads of <a href="http://json.org">JSON</a> libraries out there, and each may even have its reason to exist. Our class had these design goals:</p>

<ul>
  <li>
    <p><strong>Intuitive syntax</strong>. In languages such as Python, JSON feels like a first class data type. We used all the operator magic of modern C++ to achieve the same feeling in your code. Check out the <a href="#examples">examples below</a> and you’ll know what I mean.</p>
  </li>
  <li>
    <p><strong>Trivial integration</strong>. Our whole code consists of a single header file <a href="https://github.com/nlohmann/json/blob/develop/src/json.hpp"><code class="highlighter-rouge">json.hpp</code></a>. That’s it. No library, no subproject, no dependencies, no complex build system. The class is written in vanilla C++11. All in all, everything should require no adjustment of your compiler flags or project settings.</p>
  </li>
  <li>
    <p><strong>Serious testing</strong>. Our class is heavily <a href="https://github.com/nlohmann/json/blob/master/test/src/unit.cpp">unit-tested</a> and covers <a href="https://coveralls.io/r/nlohmann/json">100%</a> of the code, including all exceptional behavior. Furthermore, we checked with <a href="http://valgrind.org">Valgrind</a> that there are no memory leaks. To maintain high quality, the project is following the <a href="https://bestpractices.coreinfrastructure.org/projects/289">Core Infrastructure Initiative (CII) best practices</a>.</p>
  </li>
</ul>

<p>Other aspects were not so important to us:</p>

<ul>
  <li>
    <p><strong>Memory efficiency</strong>. Each JSON object has an overhead of one pointer (the maximal size of a union) and one enumeration element (1 byte). The default generalization uses the following C++ data types: <code class="highlighter-rouge">std::string</code> for strings, <code class="highlighter-rouge">int64_t</code>, <code class="highlighter-rouge">uint64_t</code> or <code class="highlighter-rouge">double</code> for numbers, <code class="highlighter-rouge">std::map</code> for objects, <code class="highlighter-rouge">std::vector</code> for arrays, and <code class="highlighter-rouge">bool</code> for Booleans. However, you can template the generalized class <code class="highlighter-rouge">basic_json</code> to your needs.</p>
  </li>
  <li>
    <p><strong>Speed</strong>. There are certainly <a href="https://github.com/miloyip/nativejson-benchmark#parsing-time">faster JSON libraries</a> out there. However, if your goal is to speed up your development by adding JSON support with a single header, then this library is the way to go. If you know how to use a <code class="highlighter-rouge">std::vector</code> or <code class="highlighter-rouge">std::map</code>, you are already set.</p>
  </li>
</ul>

<p>See the <a href="https://github.com/nlohmann/json/blob/master/.github/CONTRIBUTING.md#please-dont">contribution guidelines</a> for more information.</p>

<h2 id="integration">Integration</h2>

<p>The single required source, file <code class="highlighter-rouge">json.hpp</code> is in the <code class="highlighter-rouge">src</code> directory or <a href="https://github.com/nlohmann/json/releases">released here</a>. All you need to do is add</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cp">#include "json.hpp"
</span>
<span class="c1">// for convenience
</span><span class="k">using</span> <span class="n">json</span> <span class="o">=</span> <span class="n">nlohmann</span><span class="o">::</span><span class="n">json</span><span class="p">;</span>
</code></pre>
</div>

<p>to the files you want to use JSON objects. That’s it. Do not forget to set the necessary switches to enable C++11 (e.g., <code class="highlighter-rouge">-std=c++11</code> for GCC and Clang).</p>

<p>:beer: If you are using OS X and <a href="http://brew.sh">Homebrew</a>, just type <code class="highlighter-rouge">brew tap nlohmann/json</code> and <code class="highlighter-rouge">brew install nlohmann_json</code> and you’re set. If you want the bleeding edge rather than the latest release, use <code class="highlighter-rouge">brew install nlohmann_json --HEAD</code>.</p>

<p>If you are using the <a href="http://mesonbuild.com">Meson Build System</a>, then you can wrap this repo as a subproject.</p>

<p>If you are using <a href="https://www.conan.io/">Conan</a> to manage your dependencies, merely add <code class="highlighter-rouge">jsonformoderncpp/x.y.z@vthiery/stable</code> to your <code class="highlighter-rouge">conanfile.py</code>’s requires, where <code class="highlighter-rouge">x.y.z</code> is the release version you want to use. Please file issues <a href="https://github.com/vthiery/conan-jsonformoderncpp/issues">here</a> if you experience problems with the packages.</p>

<p>If you are using <a href="https://github.com/ruslo/hunter/">hunter</a> on your project for external dependencies, then you can use the <a href="https://github.com/ruslo/hunter/wiki/pkg.nlohmann_json">nlohman_json package</a>. Please see the hunter project for any issues regarding the packaging.</p>

<p>:warning: <a href="https://github.com/nlohmann/json/wiki/Road-toward-3.0.0">Version 3.0.0</a> is currently under development. Branch <code class="highlighter-rouge">develop</code> is used for the ongoing work and is probably <strong>unstable</strong>. Please use the <code class="highlighter-rouge">master</code> branch for the last stable version 2.1.1.</p>

<h2 id="examples">Examples</h2>

<p>Beside the examples below, you may want to check the <a href="https://nlohmann.github.io/json/">documentation</a> where each function contains a separate code example (e.g., check out <a href="https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a602f275f0359ab181221384989810604.html#a602f275f0359ab181221384989810604"><code class="highlighter-rouge">emplace()</code></a>). All <a href="https://github.com/nlohmann/json/tree/develop/doc/examples">example files</a> can be compiled and executed on their own (e.g., file <a href="https://github.com/nlohmann/json/blob/develop/doc/examples/emplace.cpp">emplace.cpp</a>).</p>

<h3 id="json-as-first-class-data-type">JSON as first-class data type</h3>

<p>Here are some examples to give you an idea how to use the class.</p>

<p>Assume you want to create the JSON object</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"pi"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.141</span><span class="p">,</span><span class="w">
  </span><span class="nt">"happy"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Niels"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"nothing"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"answer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"everything"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"list"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">],</span><span class="w">
  </span><span class="nt">"object"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">42.99</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>With the JSON class, you could write:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// create an empty structure (null)
</span><span class="n">json</span> <span class="n">j</span><span class="p">;</span>

<span class="c1">// add a number that is stored as double (note the implicit conversion of j to an object)
</span><span class="n">j</span><span class="p">[</span><span class="s">"pi"</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.141</span><span class="p">;</span>

<span class="c1">// add a Boolean that is stored as bool
</span><span class="n">j</span><span class="p">[</span><span class="s">"happy"</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>

<span class="c1">// add a string that is stored as std::string
</span><span class="n">j</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span> <span class="o">=</span> <span class="s">"Niels"</span><span class="p">;</span>

<span class="c1">// add another null object by passing nullptr
</span><span class="n">j</span><span class="p">[</span><span class="s">"nothing"</span><span class="p">]</span> <span class="o">=</span> <span class="n">nullptr</span><span class="p">;</span>

<span class="c1">// add an object inside the object
</span><span class="n">j</span><span class="p">[</span><span class="s">"answer"</span><span class="p">][</span><span class="s">"everything"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

<span class="c1">// add an array that is stored as std::vector (using an initializer list)
</span><span class="n">j</span><span class="p">[</span><span class="s">"list"</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="p">};</span>

<span class="c1">// add another object (using an initializer list of pairs)
</span><span class="n">j</span><span class="p">[</span><span class="s">"object"</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="p">{</span><span class="s">"currency"</span><span class="p">,</span> <span class="s">"USD"</span><span class="p">},</span> <span class="p">{</span><span class="s">"value"</span><span class="p">,</span> <span class="mf">42.99</span><span class="p">}</span> <span class="p">};</span>

<span class="c1">// instead, you could also write (which looks very similar to the JSON above)
</span><span class="n">json</span> <span class="n">j2</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">{</span><span class="s">"pi"</span><span class="p">,</span> <span class="mf">3.141</span><span class="p">},</span>
  <span class="p">{</span><span class="s">"happy"</span><span class="p">,</span> <span class="nb">true</span><span class="p">},</span>
  <span class="p">{</span><span class="s">"name"</span><span class="p">,</span> <span class="s">"Niels"</span><span class="p">},</span>
  <span class="p">{</span><span class="s">"nothing"</span><span class="p">,</span> <span class="n">nullptr</span><span class="p">},</span>
  <span class="p">{</span><span class="s">"answer"</span><span class="p">,</span> <span class="p">{</span>
    <span class="p">{</span><span class="s">"everything"</span><span class="p">,</span> <span class="mi">42</span><span class="p">}</span>
  <span class="p">}},</span>
  <span class="p">{</span><span class="s">"list"</span><span class="p">,</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">}},</span>
  <span class="p">{</span><span class="s">"object"</span><span class="p">,</span> <span class="p">{</span>
    <span class="p">{</span><span class="s">"currency"</span><span class="p">,</span> <span class="s">"USD"</span><span class="p">},</span>
    <span class="p">{</span><span class="s">"value"</span><span class="p">,</span> <span class="mf">42.99</span><span class="p">}</span>
  <span class="p">}}</span>
<span class="p">};</span>
</code></pre>
</div>

<p>Note that in all these cases, you never need to “tell” the compiler which JSON value you want to use. If you want to be explicit or express some edge cases, the functions <code class="highlighter-rouge">json::array</code> and <code class="highlighter-rouge">json::object</code> will help:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// a way to express the empty array []
</span><span class="n">json</span> <span class="n">empty_array_explicit</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">array</span><span class="p">();</span>

<span class="c1">// ways to express the empty object {}
</span><span class="n">json</span> <span class="n">empty_object_implicit</span> <span class="o">=</span> <span class="n">json</span><span class="p">({});</span>
<span class="n">json</span> <span class="n">empty_object_explicit</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">object</span><span class="p">();</span>

<span class="c1">// a way to express an _array_ of key/value pairs [["currency", "USD"], ["value", 42.99]]
</span><span class="n">json</span> <span class="n">array_not_object</span> <span class="o">=</span> <span class="p">{</span> <span class="n">json</span><span class="o">::</span><span class="n">array</span><span class="p">({</span><span class="s">"currency"</span><span class="p">,</span> <span class="s">"USD"</span><span class="p">}),</span> <span class="n">json</span><span class="o">::</span><span class="n">array</span><span class="p">({</span><span class="s">"value"</span><span class="p">,</span> <span class="mf">42.99</span><span class="p">})</span> <span class="p">};</span>
</code></pre>
</div>

<h3 id="serialization--deserialization">Serialization / Deserialization</h3>

<h4 id="tofrom-strings">To/from strings</h4>

<p>You can create an object (deserialization) by appending <code class="highlighter-rouge">_json</code> to a string literal:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// create object from string literal
</span><span class="n">json</span> <span class="n">j</span> <span class="o">=</span> <span class="s">"{ </span><span class="se">\"</span><span class="s">happy</span><span class="se">\"</span><span class="s">: true, </span><span class="se">\"</span><span class="s">pi</span><span class="se">\"</span><span class="s">: 3.141 }"</span><span class="n">_json</span><span class="p">;</span>

<span class="c1">// or even nicer with a raw string literal
</span><span class="k">auto</span> <span class="n">j2</span> <span class="o">=</span> <span class="n">R</span><span class="s">"(</span><span class="err">
</span><span class="s">  {</span><span class="err">
</span><span class="s">    "</span><span class="n">happy</span><span class="s">": true,</span><span class="err">
</span><span class="s">    "</span><span class="n">pi</span><span class="s">": 3.141</span><span class="err">
</span><span class="s">  }</span><span class="err">
</span><span class="s">)"</span><span class="n">_json</span><span class="p">;</span>
</code></pre>
</div>

<p>Note that without appending the <code class="highlighter-rouge">_json</code> suffix, the passed string literal is not parsed, but just used as JSON string value. That is, <code class="highlighter-rouge">json j = "{ \"happy\": true, \"pi\": 3.141 }"</code> would just store the string <code class="highlighter-rouge">"{ "happy": true, "pi": 3.141 }"</code> rather than parsing the actual object.</p>

<p>The above example can also be expressed explicitly using <code class="highlighter-rouge">json::parse()</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// parse explicitly
</span><span class="k">auto</span> <span class="n">j3</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">parse</span><span class="p">(</span><span class="s">"{ </span><span class="se">\"</span><span class="s">happy</span><span class="se">\"</span><span class="s">: true, </span><span class="se">\"</span><span class="s">pi</span><span class="se">\"</span><span class="s">: 3.141 }"</span><span class="p">);</span>
</code></pre>
</div>

<p>You can also get a string representation (serialize):</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// explicit conversion to string
</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="n">j</span><span class="p">.</span><span class="n">dump</span><span class="p">();</span>    <span class="c1">// {\"happy\":true,\"pi\":3.141}
</span>
<span class="c1">// serialization with pretty printing
// pass in the amount of spaces to indent
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">j</span><span class="p">.</span><span class="n">dump</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="c1">// {
//     "happy": true,
//     "pi": 3.141
// }
</span></code></pre>
</div>

<h4 id="tofrom-streams-eg-files-string-streams">To/from streams (e.g. files, string streams)</h4>

<p>You can also use streams to serialize and deserialize:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// deserialize from standard input
</span><span class="n">json</span> <span class="n">j</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">j</span><span class="p">;</span>

<span class="c1">// serialize to standard output
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">j</span><span class="p">;</span>

<span class="c1">// the setw manipulator was overloaded to set the indentation for pretty printing
</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">j</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</code></pre>
</div>

<p>These operators work for any subclasses of <code class="highlighter-rouge">std::istream</code> or <code class="highlighter-rouge">std::ostream</code>. Here is the same example with files:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// read a JSON file
</span><span class="n">std</span><span class="o">::</span><span class="n">ifstream</span> <span class="n">i</span><span class="p">(</span><span class="s">"file.json"</span><span class="p">);</span>
<span class="n">json</span> <span class="n">j</span><span class="p">;</span>
<span class="n">i</span> <span class="o">&gt;&gt;</span> <span class="n">j</span><span class="p">;</span>

<span class="c1">// write prettified JSON to another file
</span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span> <span class="n">o</span><span class="p">(</span><span class="s">"pretty.json"</span><span class="p">);</span>
<span class="n">o</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">j</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</code></pre>
</div>

<p>Please note that setting the exception bit for <code class="highlighter-rouge">failbit</code> is inappropriate for this use case. It will result in program termination due to the <code class="highlighter-rouge">noexcept</code> specifier in use.</p>

<h4 id="read-from-iterator-range">Read from iterator range</h4>

<p>You can also read JSON from an iterator range; that is, from any container accessible by iterators whose content is stored as contiguous byte sequence, for instance a <code class="highlighter-rouge">std::vector&lt;std::uint8_t&gt;</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">uint8_t</span><span class="o">&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="p">{</span><span class="sc">'t'</span><span class="p">,</span> <span class="sc">'r'</span><span class="p">,</span> <span class="sc">'u'</span><span class="p">,</span> <span class="sc">'e'</span><span class="p">};</span>
<span class="n">json</span> <span class="n">j</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">parse</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
</code></pre>
</div>

<p>You may leave the iterators for the range [begin, end):</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">uint8_t</span><span class="o">&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="p">{</span><span class="sc">'t'</span><span class="p">,</span> <span class="sc">'r'</span><span class="p">,</span> <span class="sc">'u'</span><span class="p">,</span> <span class="sc">'e'</span><span class="p">};</span>
<span class="n">json</span> <span class="n">j</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">parse</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
</code></pre>
</div>

<h3 id="stl-like-access">STL-like access</h3>

<p>We designed the JSON class to behave just like an STL container. In fact, it satisfies the <a href="http://en.cppreference.com/w/cpp/concept/ReversibleContainer"><strong>ReversibleContainer</strong></a> requirement.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// create an array using push_back
</span><span class="n">json</span> <span class="n">j</span><span class="p">;</span>
<span class="n">j</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span>
<span class="n">j</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">j</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>

<span class="c1">// also use emplace_back
</span><span class="n">j</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="mf">1.78</span><span class="p">);</span>

<span class="c1">// iterate the array
</span><span class="k">for</span> <span class="p">(</span><span class="n">json</span><span class="o">::</span><span class="n">iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">j</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">j</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">it</span> <span class="o">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// range-based for
</span><span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">element</span> <span class="o">:</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">element</span> <span class="o">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// getter/setter
</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">j</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="n">j</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="n">bool</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">j</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="c1">// comparison
</span><span class="n">j</span> <span class="o">==</span> <span class="s">"[</span><span class="se">\"</span><span class="s">foo</span><span class="se">\"</span><span class="s">, 1, true]"</span><span class="n">_json</span><span class="p">;</span>  <span class="c1">// true
</span>
<span class="c1">// other stuff
</span><span class="n">j</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>     <span class="c1">// 3 entries
</span><span class="n">j</span><span class="p">.</span><span class="n">empty</span><span class="p">();</span>    <span class="c1">// false
</span><span class="n">j</span><span class="p">.</span><span class="n">type</span><span class="p">();</span>     <span class="c1">// json::value_t::array
</span><span class="n">j</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>    <span class="c1">// the array is empty again
</span>
<span class="c1">// convenience type checkers
</span><span class="n">j</span><span class="p">.</span><span class="n">is_null</span><span class="p">();</span>
<span class="n">j</span><span class="p">.</span><span class="n">is_boolean</span><span class="p">();</span>
<span class="n">j</span><span class="p">.</span><span class="n">is_number</span><span class="p">();</span>
<span class="n">j</span><span class="p">.</span><span class="n">is_object</span><span class="p">();</span>
<span class="n">j</span><span class="p">.</span><span class="n">is_array</span><span class="p">();</span>
<span class="n">j</span><span class="p">.</span><span class="n">is_string</span><span class="p">();</span>

<span class="c1">// create an object
</span><span class="n">json</span> <span class="n">o</span><span class="p">;</span>
<span class="n">o</span><span class="p">[</span><span class="s">"foo"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>
<span class="n">o</span><span class="p">[</span><span class="s">"bar"</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="n">o</span><span class="p">[</span><span class="s">"baz"</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.141</span><span class="p">;</span>

<span class="c1">// also use emplace
</span><span class="n">o</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="s">"weather"</span><span class="p">,</span> <span class="s">"sunny"</span><span class="p">);</span>

<span class="c1">// special iterator member functions for objects
</span><span class="k">for</span> <span class="p">(</span><span class="n">json</span><span class="o">::</span><span class="n">iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">o</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">it</span><span class="p">.</span><span class="n">key</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">" : "</span> <span class="o">&lt;&lt;</span> <span class="n">it</span><span class="p">.</span><span class="n">value</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// find an entry
</span><span class="k">if</span> <span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">"foo"</span><span class="p">)</span> <span class="o">!=</span> <span class="n">o</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="p">{</span>
  <span class="c1">// there is an entry with key "foo"
</span><span class="p">}</span>

<span class="c1">// or simpler using count()
</span><span class="kt">int</span> <span class="n">foo_present</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span> <span class="c1">// 1
</span><span class="kt">int</span> <span class="n">fob_present</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="s">"fob"</span><span class="p">);</span> <span class="c1">// 0
</span>
<span class="c1">// delete an entry
</span><span class="n">o</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span>
</code></pre>
</div>

<h3 id="conversion-from-stl-containers">Conversion from STL containers</h3>

<p>Any sequence container (<code class="highlighter-rouge">std::array</code>, <code class="highlighter-rouge">std::vector</code>, <code class="highlighter-rouge">std::deque</code>, <code class="highlighter-rouge">std::forward_list</code>, <code class="highlighter-rouge">std::list</code>) whose values can be used to construct JSON types (e.g., integers, floating point numbers, Booleans, string types, or again STL containers described in this section) can be used to create a JSON array. The same holds for similar associative containers (<code class="highlighter-rouge">std::set</code>, <code class="highlighter-rouge">std::multiset</code>, <code class="highlighter-rouge">std::unordered_set</code>, <code class="highlighter-rouge">std::unordered_multiset</code>), but in these cases the order of the elements of the array depends how the elements are ordered in the respective STL container.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">c_vector</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">};</span>
<span class="n">json</span> <span class="n">j_vec</span><span class="p">(</span><span class="n">c_vector</span><span class="p">);</span>
<span class="c1">// [1, 2, 3, 4]
</span>
<span class="n">std</span><span class="o">::</span><span class="n">deque</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">c_deque</span> <span class="p">{</span><span class="mf">1.2</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">,</span> <span class="mf">3.4</span><span class="p">,</span> <span class="mf">5.6</span><span class="p">};</span>
<span class="n">json</span> <span class="n">j_deque</span><span class="p">(</span><span class="n">c_deque</span><span class="p">);</span>
<span class="c1">// [1.2, 2.3, 3.4, 5.6]
</span>
<span class="n">std</span><span class="o">::</span><span class="n">list</span><span class="o">&lt;</span><span class="n">bool</span><span class="o">&gt;</span> <span class="n">c_list</span> <span class="p">{</span><span class="nb">true</span><span class="p">,</span> <span class="nb">true</span><span class="p">,</span> <span class="nb">false</span><span class="p">,</span> <span class="nb">true</span><span class="p">};</span>
<span class="n">json</span> <span class="n">j_list</span><span class="p">(</span><span class="n">c_list</span><span class="p">);</span>
<span class="c1">// [true, true, false, true]
</span>
<span class="n">std</span><span class="o">::</span><span class="n">forward_list</span><span class="o">&lt;</span><span class="kt">int64_t</span><span class="o">&gt;</span> <span class="n">c_flist</span> <span class="p">{</span><span class="mi">12345678909876</span><span class="p">,</span> <span class="mi">23456789098765</span><span class="p">,</span> <span class="mi">34567890987654</span><span class="p">,</span> <span class="mi">45678909876543</span><span class="p">};</span>
<span class="n">json</span> <span class="n">j_flist</span><span class="p">(</span><span class="n">c_flist</span><span class="p">);</span>
<span class="c1">// [12345678909876, 23456789098765, 34567890987654, 45678909876543]
</span>
<span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span> <span class="mi">4</span><span class="o">&gt;</span> <span class="n">c_array</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">json</span> <span class="n">j_array</span><span class="p">(</span><span class="n">c_array</span><span class="p">);</span>
<span class="c1">// [1, 2, 3, 4]
</span>
<span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">c_set</span> <span class="p">{</span><span class="s">"one"</span><span class="p">,</span> <span class="s">"two"</span><span class="p">,</span> <span class="s">"three"</span><span class="p">,</span> <span class="s">"four"</span><span class="p">,</span> <span class="s">"one"</span><span class="p">};</span>
<span class="n">json</span> <span class="n">j_set</span><span class="p">(</span><span class="n">c_set</span><span class="p">);</span> <span class="c1">// only one entry for "one" is used
// ["four", "one", "three", "two"]
</span>
<span class="n">std</span><span class="o">::</span><span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">c_uset</span> <span class="p">{</span><span class="s">"one"</span><span class="p">,</span> <span class="s">"two"</span><span class="p">,</span> <span class="s">"three"</span><span class="p">,</span> <span class="s">"four"</span><span class="p">,</span> <span class="s">"one"</span><span class="p">};</span>
<span class="n">json</span> <span class="n">j_uset</span><span class="p">(</span><span class="n">c_uset</span><span class="p">);</span> <span class="c1">// only one entry for "one" is used
// maybe ["two", "three", "four", "one"]
</span>
<span class="n">std</span><span class="o">::</span><span class="n">multiset</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">c_mset</span> <span class="p">{</span><span class="s">"one"</span><span class="p">,</span> <span class="s">"two"</span><span class="p">,</span> <span class="s">"one"</span><span class="p">,</span> <span class="s">"four"</span><span class="p">};</span>
<span class="n">json</span> <span class="n">j_mset</span><span class="p">(</span><span class="n">c_mset</span><span class="p">);</span> <span class="c1">// both entries for "one" are used
// maybe ["one", "two", "one", "four"]
</span>
<span class="n">std</span><span class="o">::</span><span class="n">unordered_multiset</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">c_umset</span> <span class="p">{</span><span class="s">"one"</span><span class="p">,</span> <span class="s">"two"</span><span class="p">,</span> <span class="s">"one"</span><span class="p">,</span> <span class="s">"four"</span><span class="p">};</span>
<span class="n">json</span> <span class="n">j_umset</span><span class="p">(</span><span class="n">c_umset</span><span class="p">);</span> <span class="c1">// both entries for "one" are used
// maybe ["one", "two", "one", "four"]
</span></code></pre>
</div>

<p>Likewise, any associative key-value containers (<code class="highlighter-rouge">std::map</code>, <code class="highlighter-rouge">std::multimap</code>, <code class="highlighter-rouge">std::unordered_map</code>, <code class="highlighter-rouge">std::unordered_multimap</code>) whose keys can construct an <code class="highlighter-rouge">std::string</code> and whose values can be used to construct JSON types (see examples above) can be used to create a JSON object. Note that in case of multimaps only one key is used in the JSON object and the value depends on the internal order of the STL container.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">c_map</span> <span class="p">{</span> <span class="p">{</span><span class="s">"one"</span><span class="p">,</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="s">"two"</span><span class="p">,</span> <span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="s">"three"</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span> <span class="p">};</span>
<span class="n">json</span> <span class="n">j_map</span><span class="p">(</span><span class="n">c_map</span><span class="p">);</span>
<span class="c1">// {"one": 1, "three": 3, "two": 2 }
</span>
<span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span><span class="p">,</span> <span class="kt">double</span><span class="o">&gt;</span> <span class="n">c_umap</span> <span class="p">{</span> <span class="p">{</span><span class="s">"one"</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">},</span> <span class="p">{</span><span class="s">"two"</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">},</span> <span class="p">{</span><span class="s">"three"</span><span class="p">,</span> <span class="mf">3.4</span><span class="p">}</span> <span class="p">};</span>
<span class="n">json</span> <span class="n">j_umap</span><span class="p">(</span><span class="n">c_umap</span><span class="p">);</span>
<span class="c1">// {"one": 1.2, "two": 2.3, "three": 3.4}
</span>
<span class="n">std</span><span class="o">::</span><span class="n">multimap</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="n">bool</span><span class="o">&gt;</span> <span class="n">c_mmap</span> <span class="p">{</span> <span class="p">{</span><span class="s">"one"</span><span class="p">,</span> <span class="nb">true</span><span class="p">},</span> <span class="p">{</span><span class="s">"two"</span><span class="p">,</span> <span class="nb">true</span><span class="p">},</span> <span class="p">{</span><span class="s">"three"</span><span class="p">,</span> <span class="nb">false</span><span class="p">},</span> <span class="p">{</span><span class="s">"three"</span><span class="p">,</span> <span class="nb">true</span><span class="p">}</span> <span class="p">};</span>
<span class="n">json</span> <span class="n">j_mmap</span><span class="p">(</span><span class="n">c_mmap</span><span class="p">);</span> <span class="c1">// only one entry for key "three" is used
// maybe {"one": true, "two": true, "three": true}
</span>
<span class="n">std</span><span class="o">::</span><span class="n">unordered_multimap</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="n">bool</span><span class="o">&gt;</span> <span class="n">c_ummap</span> <span class="p">{</span> <span class="p">{</span><span class="s">"one"</span><span class="p">,</span> <span class="nb">true</span><span class="p">},</span> <span class="p">{</span><span class="s">"two"</span><span class="p">,</span> <span class="nb">true</span><span class="p">},</span> <span class="p">{</span><span class="s">"three"</span><span class="p">,</span> <span class="nb">false</span><span class="p">},</span> <span class="p">{</span><span class="s">"three"</span><span class="p">,</span> <span class="nb">true</span><span class="p">}</span> <span class="p">};</span>
<span class="n">json</span> <span class="n">j_ummap</span><span class="p">(</span><span class="n">c_ummap</span><span class="p">);</span> <span class="c1">// only one entry for key "three" is used
// maybe {"one": true, "two": true, "three": true}
</span></code></pre>
</div>

<h3 id="json-pointer-and-json-patch">JSON Pointer and JSON Patch</h3>

<p>The library supports <strong>JSON Pointer</strong> (<a href="https://tools.ietf.org/html/rfc6901">RFC 6901</a>) as alternative means to address structured values. On top of this, <strong>JSON Patch</strong> (<a href="https://tools.ietf.org/html/rfc6902">RFC 6902</a>) allows to describe differences between two JSON values - effectively allowing patch and diff operations known from Unix.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// a JSON value
</span><span class="n">json</span> <span class="n">j_original</span> <span class="o">=</span> <span class="n">R</span><span class="s">"({</span><span class="err">
</span><span class="s">  "</span><span class="n">baz</span><span class="s">": ["</span><span class="n">one</span><span class="s">", "</span><span class="n">two</span><span class="s">", "</span><span class="n">three</span><span class="s">"],</span><span class="err">
</span><span class="s">  "</span><span class="n">foo</span><span class="s">": "</span><span class="n">bar</span><span class="s">"</span><span class="err">
</span><span class="s">})"</span><span class="n">_json</span><span class="p">;</span>

<span class="c1">// access members with a JSON pointer (RFC 6901)
</span><span class="n">j_original</span><span class="p">[</span><span class="s">"/baz/1"</span><span class="n">_json_pointer</span><span class="p">];</span>
<span class="c1">// "two"
</span>
<span class="c1">// a JSON patch (RFC 6902)
</span><span class="n">json</span> <span class="n">j_patch</span> <span class="o">=</span> <span class="n">R</span><span class="s">"([</span><span class="err">
</span><span class="s">  { "</span><span class="n">op</span><span class="s">": "</span><span class="n">replace</span><span class="s">", "</span><span class="n">path</span><span class="s">": "</span><span class="o">/</span><span class="n">baz</span><span class="s">", "</span><span class="n">value</span><span class="s">": "</span><span class="n">boo</span><span class="s">" },</span><span class="err">
</span><span class="s">  { "</span><span class="n">op</span><span class="s">": "</span><span class="n">add</span><span class="s">", "</span><span class="n">path</span><span class="s">": "</span><span class="o">/</span><span class="n">hello</span><span class="s">", "</span><span class="n">value</span><span class="s">": ["</span><span class="n">world</span><span class="s">"] },</span><span class="err">
</span><span class="s">  { "</span><span class="n">op</span><span class="s">": "</span><span class="n">remove</span><span class="s">", "</span><span class="n">path</span><span class="s">": "</span><span class="o">/</span><span class="n">foo</span><span class="s">"}</span><span class="err">
</span><span class="s">])"</span><span class="n">_json</span><span class="p">;</span>

<span class="c1">// apply the patch
</span><span class="n">json</span> <span class="n">j_result</span> <span class="o">=</span> <span class="n">j_original</span><span class="p">.</span><span class="n">patch</span><span class="p">(</span><span class="n">j_patch</span><span class="p">);</span>
<span class="c1">// {
//    "baz": "boo",
//    "hello": ["world"]
// }
</span>
<span class="c1">// calculate a JSON patch from two JSON values
</span><span class="n">json</span><span class="o">::</span><span class="n">diff</span><span class="p">(</span><span class="n">j_result</span><span class="p">,</span> <span class="n">j_original</span><span class="p">);</span>
<span class="c1">// [
//   { "op":" replace", "path": "/baz", "value": ["one", "two", "three"] },
//   { "op": "remove","path": "/hello" },
//   { "op": "add", "path": "/foo", "value": "bar" }
// ]
</span></code></pre>
</div>

<h3 id="implicit-conversions">Implicit conversions</h3>

<p>The type of the JSON object is determined automatically by the expression to store. Likewise, the stored value is implicitly converted.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// strings
</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s1</span> <span class="o">=</span> <span class="s">"Hello, world!"</span><span class="p">;</span>
<span class="n">json</span> <span class="n">js</span> <span class="o">=</span> <span class="n">s1</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">js</span><span class="p">;</span>

<span class="c1">// Booleans
</span><span class="n">bool</span> <span class="n">b1</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="n">json</span> <span class="n">jb</span> <span class="o">=</span> <span class="n">b1</span><span class="p">;</span>
<span class="n">bool</span> <span class="n">b2</span> <span class="o">=</span> <span class="n">jb</span><span class="p">;</span>

<span class="c1">// numbers
</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="n">json</span> <span class="n">jn</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">f</span> <span class="o">=</span> <span class="n">jn</span><span class="p">;</span>

<span class="c1">// etc.
</span></code></pre>
</div>

<p>You can also explicitly ask for the value:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">vs</span> <span class="o">=</span> <span class="n">js</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">bool</span> <span class="n">vb</span> <span class="o">=</span> <span class="n">jb</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="n">bool</span><span class="o">&gt;</span><span class="p">();</span>
<span class="kt">int</span> <span class="n">vi</span> <span class="o">=</span> <span class="n">jn</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// etc.
</span></code></pre>
</div>

<h3 id="arbitrary-types-conversions">Arbitrary types conversions</h3>

<p>Every type can be serialized in JSON, not just STL-containers and scalar types. Usually, you would do something along those lines:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">namespace</span> <span class="n">ns</span> <span class="p">{</span>
    <span class="c1">// a simple struct to model a person
</span>    <span class="k">struct</span> <span class="n">person</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">address</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">age</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="n">ns</span><span class="o">::</span><span class="n">person</span> <span class="n">p</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Ned Flanders"</span><span class="p">,</span> <span class="s">"744 Evergreen Terrace"</span><span class="p">,</span> <span class="mi">60</span><span class="p">};</span>

<span class="c1">// convert to JSON: copy each value into the JSON object
</span><span class="n">json</span> <span class="n">j</span><span class="p">;</span>
<span class="n">j</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">name</span><span class="p">;</span>
<span class="n">j</span><span class="p">[</span><span class="s">"address"</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">address</span><span class="p">;</span>
<span class="n">j</span><span class="p">[</span><span class="s">"age"</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">age</span><span class="p">;</span>

<span class="c1">// ...
</span>
<span class="c1">// convert from JSON: copy each value from the JSON object
</span><span class="n">ns</span><span class="o">::</span><span class="n">person</span> <span class="n">p</span> <span class="p">{</span>
    <span class="n">j</span><span class="p">[</span><span class="s">"name"</span><span class="p">].</span><span class="n">get</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(),</span>
    <span class="n">j</span><span class="p">[</span><span class="s">"address"</span><span class="p">].</span><span class="n">get</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(),</span>
    <span class="n">j</span><span class="p">[</span><span class="s">"age"</span><span class="p">].</span><span class="n">get</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">()</span>
<span class="p">};</span>
</code></pre>
</div>

<p>It works, but that’s quite a lot of boilerplate… Fortunately, there’s a better way:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// create a person
</span><span class="n">ns</span><span class="o">::</span><span class="n">person</span> <span class="n">p</span> <span class="p">{</span><span class="s">"Ned Flanders"</span><span class="p">,</span> <span class="s">"744 Evergreen Terrace"</span><span class="p">,</span> <span class="mi">60</span><span class="p">};</span>

<span class="c1">// conversion: person -&gt; json
</span><span class="n">json</span> <span class="n">j</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>

<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">j</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="c1">// {"address":"744 Evergreen Terrace","age":60,"name":"Ned Flanders"}
</span>
<span class="c1">// conversion: json -&gt; person
</span><span class="n">ns</span><span class="o">::</span><span class="n">person</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>

<span class="c1">// that's it
</span><span class="n">assert</span><span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="n">p2</span><span class="p">);</span>
</code></pre>
</div>

<h4 id="basic-usage">Basic usage</h4>

<p>To make this work with one of your types, you only need to provide two functions:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">using</span> <span class="n">nlohmann</span><span class="o">::</span><span class="n">json</span><span class="p">;</span>

<span class="k">namespace</span> <span class="n">ns</span> <span class="p">{</span>
    <span class="kt">void</span> <span class="n">to_json</span><span class="p">(</span><span class="n">json</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="k">const</span> <span class="n">person</span><span class="o">&amp;</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">j</span> <span class="o">=</span> <span class="n">json</span><span class="p">{</span> <span class="p">{</span><span class="s">"name"</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">name</span><span class="p">},</span> <span class="p">{</span><span class="s">"address"</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">address</span><span class="p">},</span> <span class="p">{</span><span class="s">"age"</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">age</span><span class="p">}</span> <span class="p">};</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">from_json</span><span class="p">(</span><span class="k">const</span> <span class="n">json</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="n">person</span><span class="o">&amp;</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">p</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">j</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">"name"</span><span class="p">).</span><span class="n">get</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="n">p</span><span class="p">.</span><span class="n">address</span> <span class="o">=</span> <span class="n">j</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">"address"</span><span class="p">).</span><span class="n">get</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="n">p</span><span class="p">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">j</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">"age"</span><span class="p">).</span><span class="n">get</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span> <span class="c1">// namespace ns
</span></code></pre>
</div>

<p>That’s all! When calling the <code class="highlighter-rouge">json</code> constructor with your type, your custom <code class="highlighter-rouge">to_json</code> method will be automatically called.
Likewise, when calling <code class="highlighter-rouge">get&lt;your_type&gt;()</code>, the <code class="highlighter-rouge">from_json</code> method will be called.</p>

<p>Some important things:</p>

<ul>
  <li>Those methods <strong>MUST</strong> be in your type’s namespace (which can be the global namespace), or the library will not be able to locate them (in this example, they are in namespace <code class="highlighter-rouge">ns</code>, where <code class="highlighter-rouge">person</code> is defined).</li>
  <li>When using <code class="highlighter-rouge">get&lt;your_type&gt;()</code>, <code class="highlighter-rouge">your_type</code> <strong>MUST</strong> be <a href="http://en.cppreference.com/w/cpp/concept/DefaultConstructible">DefaultConstructible</a>. (There is a way to bypass this requirement described later.)</li>
  <li>In function <code class="highlighter-rouge">from_json</code>, use function <a href="https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a93403e803947b86f4da2d1fb3345cf2c.html#a93403e803947b86f4da2d1fb3345cf2c"><code class="highlighter-rouge">at()</code></a> to access the object values rather than <code class="highlighter-rouge">operator[]</code>. In case a key does not exists, <code class="highlighter-rouge">at</code> throws an exception that you can handle, whereas <code class="highlighter-rouge">operator[]</code> exhibits undefined behavior.</li>
  <li>In case your type contains several <code class="highlighter-rouge">operator=</code> definitions, code like <code class="highlighter-rouge">your_variable = your_json;</code> <a href="https://github.com/nlohmann/json/issues/667">may not compile</a>. You need to write <code class="highlighter-rouge">your_variable = your_json.get&lt;decltype your_variable&gt;();</code> instead.</li>
  <li>You do not need to add serializers or deserializers for STL types like <code class="highlighter-rouge">std::vector</code>: the library already implements these.</li>
</ul>

<h4 id="how-do-i-convert-third-party-types">How do I convert third-party types?</h4>

<p>This requires a bit more advanced technique. But first, let’s see how this conversion mechanism works:</p>

<p>The library uses <strong>JSON Serializers</strong> to convert types to json.
The default serializer for <code class="highlighter-rouge">nlohmann::json</code> is <code class="highlighter-rouge">nlohmann::adl_serializer</code> (ADL means <a href="http://en.cppreference.com/w/cpp/language/adl">Argument-Dependent Lookup</a>).</p>

<p>It is implemented like this (simplified):</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="k">struct</span> <span class="n">adl_serializer</span> <span class="p">{</span>
    <span class="k">static</span> <span class="kt">void</span> <span class="n">to_json</span><span class="p">(</span><span class="n">json</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// calls the "to_json" method in T's namespace
</span>    <span class="p">}</span>

    <span class="k">static</span> <span class="kt">void</span> <span class="n">from_json</span><span class="p">(</span><span class="k">const</span> <span class="n">json</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// same thing, but with the "from_json" method
</span>    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
</div>

<p>This serializer works fine when you have control over the type’s namespace. However, what about <code class="highlighter-rouge">boost::optional</code>, or <code class="highlighter-rouge">std::filesystem::path</code> (C++17)? Hijacking the <code class="highlighter-rouge">boost</code> namespace is pretty bad, and it’s illegal to add something other than template specializations to <code class="highlighter-rouge">std</code>…</p>

<p>To solve this, you need to add a specialization of <code class="highlighter-rouge">adl_serializer</code> to the <code class="highlighter-rouge">nlohmann</code> namespace, here’s an example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// partial specialization (full specialization works too)
</span><span class="k">namespace</span> <span class="n">nlohmann</span> <span class="p">{</span>
    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
    <span class="k">struct</span> <span class="n">adl_serializer</span><span class="o">&lt;</span><span class="n">boost</span><span class="o">::</span><span class="n">optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> <span class="p">{</span>
        <span class="k">static</span> <span class="kt">void</span> <span class="n">to_json</span><span class="p">(</span><span class="n">json</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="k">const</span> <span class="n">boost</span><span class="o">::</span><span class="n">optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">opt</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">opt</span> <span class="o">==</span> <span class="n">boost</span><span class="o">::</span><span class="n">none</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">nullptr</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="n">j</span> <span class="o">=</span> <span class="o">*</span><span class="n">opt</span><span class="p">;</span> <span class="c1">// this will call adl_serializer&lt;T&gt;::to_json which will
</span>                        <span class="c1">// find the free function to_json in T's namespace!
</span>            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">void</span> <span class="n">from_json</span><span class="p">(</span><span class="k">const</span> <span class="n">json</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="n">boost</span><span class="o">::</span><span class="n">optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">opt</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">j</span><span class="p">.</span><span class="n">is_null</span><span class="p">())</span> <span class="p">{</span>
                <span class="n">opt</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">none</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">opt</span> <span class="o">=</span> <span class="n">j</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">();</span> <span class="c1">// same as above, but with
</span>                                  <span class="c1">// adl_serializer&lt;T&gt;::from_json
</span>            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}</span>
</code></pre>
</div>

<h4 id="how-can-i-use-get-for-non-default-constructiblenon-copyable-types">How can I use <code class="highlighter-rouge">get()</code> for non-default constructible/non-copyable types?</h4>

<p>There is a way, if your type is <a href="http://en.cppreference.com/w/cpp/concept/MoveConstructible">MoveConstructible</a>. You will need to specialize the <code class="highlighter-rouge">adl_serializer</code> as well, but with a special <code class="highlighter-rouge">from_json</code> overload:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">struct</span> <span class="n">move_only_type</span> <span class="p">{</span>
    <span class="n">move_only_type</span><span class="p">()</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
    <span class="n">move_only_type</span><span class="p">(</span><span class="kt">int</span> <span class="n">ii</span><span class="p">)</span><span class="o">:</span> <span class="n">i</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span> <span class="p">{}</span>
    <span class="n">move_only_type</span><span class="p">(</span><span class="k">const</span> <span class="n">move_only_type</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
    <span class="n">move_only_type</span><span class="p">(</span><span class="n">move_only_type</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">namespace</span> <span class="n">nlohmann</span> <span class="p">{</span>
    <span class="k">template</span> <span class="o">&lt;&gt;</span>
    <span class="k">struct</span> <span class="n">adl_serializer</span><span class="o">&lt;</span><span class="n">move_only_type</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="c1">// note: the return type is no longer 'void', and the method only takes
</span>        <span class="c1">// one argument
</span>        <span class="k">static</span> <span class="n">move_only_type</span> <span class="n">from_json</span><span class="p">(</span><span class="k">const</span> <span class="n">json</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">{</span><span class="n">j</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">()};</span>
        <span class="p">}</span>

        <span class="c1">// Here's the catch! You must provide a to_json method! Otherwise you
</span>        <span class="c1">// will not be able to convert move_only_type to json, since you fully
</span>        <span class="c1">// specialized adl_serializer on that type
</span>        <span class="k">static</span> <span class="kt">void</span> <span class="n">to_json</span><span class="p">(</span><span class="n">json</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="n">move_only_type</span> <span class="n">t</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">i</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}</span>
</code></pre>
</div>

<h4 id="can-i-write-my-own-serializer-advanced-use">Can I write my own serializer? (Advanced use)</h4>

<p>Yes. You might want to take a look at <a href="https://github.com/nlohmann/json/blob/develop/test/src/unit-udt.cpp"><code class="highlighter-rouge">unit-udt.cpp</code></a> in the test suite, to see a few examples.</p>

<p>If you write your own serializer, you’ll need to do a few things:</p>

<ul>
  <li>use a different <code class="highlighter-rouge">basic_json</code> alias than <code class="highlighter-rouge">nlohmann::json</code> (the last template parameter of <code class="highlighter-rouge">basic_json</code> is the <code class="highlighter-rouge">JSONSerializer</code>)</li>
  <li>use your <code class="highlighter-rouge">basic_json</code> alias (or a template parameter) in all your <code class="highlighter-rouge">to_json</code>/<code class="highlighter-rouge">from_json</code> methods</li>
  <li>use <code class="highlighter-rouge">nlohmann::to_json</code> and <code class="highlighter-rouge">nlohmann::from_json</code> when you need ADL</li>
</ul>

<p>Here is an example, without simplifications, that only accepts types with a size &lt;= 32, and uses ADL.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// You should use void as a second template argument
// if you don't need compile-time checks on T
</span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">SFINAE</span> <span class="o">=</span> <span class="k">typename</span> <span class="n">std</span><span class="o">::</span><span class="n">enable_if</span><span class="o">&lt;</span><span class="k">sizeof</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">32</span><span class="o">&gt;::</span><span class="n">type</span><span class="o">&gt;</span>
<span class="k">struct</span> <span class="n">less_than_32_serializer</span> <span class="p">{</span>
    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">BasicJsonType</span><span class="o">&gt;</span>
    <span class="k">static</span> <span class="kt">void</span> <span class="n">to_json</span><span class="p">(</span><span class="n">BasicJsonType</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="n">T</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// we want to use ADL, and call the correct to_json overload
</span>        <span class="k">using</span> <span class="n">nlohmann</span><span class="o">::</span><span class="n">to_json</span><span class="p">;</span> <span class="c1">// this method is called by adl_serializer,
</span>                                 <span class="c1">// this is where the magic happens
</span>        <span class="n">to_json</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">BasicJsonType</span><span class="o">&gt;</span>
    <span class="k">static</span> <span class="kt">void</span> <span class="n">from_json</span><span class="p">(</span><span class="k">const</span> <span class="n">BasicJsonType</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// same thing here
</span>        <span class="k">using</span> <span class="n">nlohmann</span><span class="o">::</span><span class="n">from_json</span><span class="p">;</span>
        <span class="n">from_json</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
</div>

<p>Be <strong>very</strong> careful when reimplementing your serializer, you can stack overflow if you don’t pay attention:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="kt">void</span><span class="o">&gt;</span>
<span class="k">struct</span> <span class="n">bad_serializer</span>
<span class="p">{</span>
    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">BasicJsonType</span><span class="o">&gt;</span>
    <span class="k">static</span> <span class="kt">void</span> <span class="n">to_json</span><span class="p">(</span><span class="n">BasicJsonType</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// this calls BasicJsonType::json_serializer&lt;T&gt;::to_json(j, value);
</span>      <span class="c1">// if BasicJsonType::json_serializer == bad_serializer ... oops!
</span>      <span class="n">j</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">BasicJsonType</span><span class="o">&gt;</span>
    <span class="k">static</span> <span class="kt">void</span> <span class="n">to_json</span><span class="p">(</span><span class="k">const</span> <span class="n">BasicJsonType</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// this calls BasicJsonType::json_serializer&lt;T&gt;::from_json(j, value);
</span>      <span class="c1">// if BasicJsonType::json_serializer == bad_serializer ... oops!
</span>      <span class="n">value</span> <span class="o">=</span> <span class="n">j</span><span class="p">.</span><span class="k">template</span> <span class="n">get</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">();</span> <span class="c1">// oops!
</span>    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
</div>

<h3 id="binary-formats-cbor-and-messagepack">Binary formats (CBOR and MessagePack)</h3>

<p>Though JSON is a ubiquitous data format, it is not a very compact format suitable for data exchange, for instance over a network. Hence, the library supports <a href="http://cbor.io">CBOR</a> (Concise Binary Object Representation) and <a href="http://msgpack.org">MessagePack</a> to efficiently encode JSON values to byte vectors and to decode such vectors.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// create a JSON value
</span><span class="n">json</span> <span class="n">j</span> <span class="o">=</span> <span class="n">R</span><span class="s">"({"</span><span class="n">compact</span><span class="s">": true, "</span><span class="n">schema</span><span class="s">": 0})"</span><span class="n">_json</span><span class="p">;</span>

<span class="c1">// serialize to CBOR
</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">uint8_t</span><span class="o">&gt;</span> <span class="n">v_cbor</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">to_cbor</span><span class="p">(</span><span class="n">j</span><span class="p">);</span>

<span class="c1">// 0xa2, 0x67, 0x63, 0x6f, 0x6d, 0x70, 0x61, 0x63, 0x74, 0xf5, 0x66, 0x73, 0x63, 0x68, 0x65, 0x6d, 0x61, 0x00
</span>
<span class="c1">// roundtrip
</span><span class="n">json</span> <span class="n">j_from_cbor</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">from_cbor</span><span class="p">(</span><span class="n">v_cbor</span><span class="p">);</span>

<span class="c1">// serialize to MessagePack
</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">uint8_t</span><span class="o">&gt;</span> <span class="n">v_msgpack</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">to_msgpack</span><span class="p">(</span><span class="n">j</span><span class="p">);</span>

<span class="c1">// 0x82, 0xa7, 0x63, 0x6f, 0x6d, 0x70, 0x61, 0x63, 0x74, 0xc3, 0xa6, 0x73, 0x63, 0x68, 0x65, 0x6d, 0x61, 0x00
</span>
<span class="c1">// roundtrip
</span><span class="n">json</span> <span class="n">j_from_msgpack</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">from_msgpack</span><span class="p">(</span><span class="n">v_msgpack</span><span class="p">);</span>
</code></pre>
</div>

<h2 id="supported-compilers">Supported compilers</h2>

<p>Though it’s 2016 already, the support for C++11 is still a bit sparse. Currently, the following compilers are known to work:</p>

<ul>
  <li>GCC 4.9 - 7.1 (and possibly later)</li>
  <li>Clang 3.4 - 5.0 (and possibly later)</li>
  <li>Microsoft Visual C++ 2015 / Build Tools 14.0.25123.0 (and possibly later)</li>
  <li>Microsoft Visual C++ 2017 / Build Tools 15.1.548.43366 (and possibly later)</li>
</ul>

<p>I would be happy to learn about other compilers/versions.</p>

<p>Please note:</p>

<ul>
  <li>GCC 4.8 does not work because of two bugs (<a href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=55817">55817</a> and <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=57824">57824</a>) in the C++11 support. Note there is a <a href="https://github.com/nlohmann/json/pull/212">pull request</a> to fix some of the issues.</li>
  <li>Android defaults to using very old compilers and C++ libraries. To fix this, add the following to your <code class="highlighter-rouge">Application.mk</code>. This will switch to the LLVM C++ library, the Clang compiler, and enable C++11 and other features disabled by default.</li>
</ul>

<pre><code class="language-bb">    APP_STL := c++_shared
    NDK_TOOLCHAIN_VERSION := clang3.6
    APP_CPPFLAGS += -frtti -fexceptions
</code></pre>

<p>The code compiles successfully with <a href="https://developer.android.com/ndk/index.html?hl=ml">Android NDK</a>, Revision 9 - 11 (and possibly later) and <a href="https://www.crystax.net/en/android/ndk">CrystaX’s Android NDK</a> version 10.</p>

<ul>
  <li>For GCC running on MinGW or Android SDK, the error <code class="highlighter-rouge">'to_string' is not a member of 'std'</code> (or similarly, for <code class="highlighter-rouge">strtod</code>) may occur. Note this is not an issue with the code,  but rather with the compiler itself. On Android, see above to build with a newer environment.  For MinGW, please refer to <a href="http://tehsausage.com/mingw-to-string">this site</a> and <a href="https://github.com/nlohmann/json/issues/136">this discussion</a> for information on how to fix this bug. For Android NDK using <code class="highlighter-rouge">APP_STL := gnustl_static</code>, please refer to <a href="https://github.com/nlohmann/json/issues/219">this discussion</a>.</li>
</ul>

<p>The following compilers are currently used in continuous integration at <a href="https://travis-ci.org/nlohmann/json">Travis</a> and <a href="https://ci.appveyor.com/project/nlohmann/json">AppVeyor</a>:</p>

<table>
  <thead>
    <tr>
      <th>Compiler</th>
      <th>Operating System</th>
      <th>Version String</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>GCC 4.9.4</td>
      <td>Ubuntu 14.04.5 LTS</td>
      <td>g++-4.9 (Ubuntu 4.9.4-2ubuntu1~14.04.1) 4.9.4</td>
    </tr>
    <tr>
      <td>GCC 5.4.1</td>
      <td>Ubuntu 14.04.5 LTS</td>
      <td>g++-5 (Ubuntu 5.4.1-2ubuntu1~14.04) 5.4.1 20160904</td>
    </tr>
    <tr>
      <td>GCC 6.3.0</td>
      <td>Ubuntu 14.04.5 LTS</td>
      <td>g++-6 (Ubuntu/Linaro 6.3.0-18ubuntu2~14.04) 6.3.0 20170519</td>
    </tr>
    <tr>
      <td>GCC 7.1.0</td>
      <td>Ubuntu 14.04.5 LTS</td>
      <td>g++-7 (Ubuntu 7.1.0-5ubuntu2~14.04) 7.1.0</td>
    </tr>
    <tr>
      <td>Clang 3.5.0</td>
      <td>Ubuntu 14.04.5 LTS</td>
      <td>clang version 3.5.0-4ubuntu2~trusty2 (tags/RELEASE_350/final)</td>
    </tr>
    <tr>
      <td>Clang 3.6.2</td>
      <td>Ubuntu 14.04.5 LTS</td>
      <td>clang version 3.6.2-svn240577-1~exp1 (branches/release_36)</td>
    </tr>
    <tr>
      <td>Clang 3.7.1</td>
      <td>Ubuntu 14.04.5 LTS</td>
      <td>clang version 3.7.1-svn253571-1~exp1 (branches/release_37)</td>
    </tr>
    <tr>
      <td>Clang 3.8.0</td>
      <td>Ubuntu 14.04.5 LTS</td>
      <td>clang version 3.8.0-2ubuntu3~trusty5 (tags/RELEASE_380/final)</td>
    </tr>
    <tr>
      <td>Clang 3.9.1</td>
      <td>Ubuntu 14.04.5 LTS</td>
      <td>clang version 3.9.1-4ubuntu3~14.04.2 (tags/RELEASE_391/rc2)</td>
    </tr>
    <tr>
      <td>Clang 4.0.1</td>
      <td>Ubuntu 14.04.5 LTS</td>
      <td>clang version 4.0.1-svn305264-1~exp1 (branches/release_40)</td>
    </tr>
    <tr>
      <td>Clang 5.0.0</td>
      <td>Ubuntu 14.04.5 LTS</td>
      <td>clang version 5.0.0-svn310902-1~exp1 (branches/release_50)</td>
    </tr>
    <tr>
      <td>Clang Xcode 6.4</td>
      <td>Darwin Kernel Version 14.3.0 (OSX 10.10.3)</td>
      <td>Apple LLVM version 6.1.0 (clang-602.0.53) (based on LLVM 3.6.0svn)</td>
    </tr>
    <tr>
      <td>Clang Xcode 7.3</td>
      <td>Darwin Kernel Version 15.0.0 (OSX 10.10.5)</td>
      <td>Apple LLVM version 7.3.0 (clang-703.0.29)</td>
    </tr>
    <tr>
      <td>Clang Xcode 8.0</td>
      <td>Darwin Kernel Version 15.6.0</td>
      <td>Apple LLVM version 8.0.0 (clang-800.0.38)</td>
    </tr>
    <tr>
      <td>Clang Xcode 8.1</td>
      <td>Darwin Kernel Version 16.1.0 (macOS 10.12.1)</td>
      <td>Apple LLVM version 8.0.0 (clang-800.0.42.1)</td>
    </tr>
    <tr>
      <td>Clang Xcode 8.2</td>
      <td>Darwin Kernel Version 16.1.0 (macOS 10.12.1)</td>
      <td>Apple LLVM version 8.0.0 (clang-800.0.42.1)</td>
    </tr>
    <tr>
      <td>Clang Xcode 8.3</td>
      <td>Darwin Kernel Version 16.5.0 (macOS 10.12.4)</td>
      <td>Apple LLVM version 8.1.0 (clang-802.0.38)</td>
    </tr>
    <tr>
      <td>Clang Xcode 9 beta</td>
      <td>Darwin Kernel Version 16.6.0 (macOS 10.12.5)</td>
      <td>Apple LLVM version 9.0.0 (clang-900.0.26)</td>
    </tr>
    <tr>
      <td>Visual Studio 14 2015</td>
      <td>Windows Server 2012 R2 (x64)</td>
      <td>Microsoft (R) Build Engine version 14.0.25420.1</td>
    </tr>
    <tr>
      <td>Visual Studio 2017</td>
      <td>Windows Server 2016</td>
      <td>Microsoft (R) Build Engine version 15.1.1012.6693</td>
    </tr>
  </tbody>
</table>

<h2 id="license">License</h2>

<p>The class is licensed under the <a href="http://opensource.org/licenses/MIT">MIT License</a>:</p>

<p>Copyright © 2013-2017 <a href="http://nlohmann.me">Niels Lohmann</a></p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>

<h2 id="thanks">Thanks</h2>

<p>I deeply appreciate the help of the following people.</p>

<ul>
  <li><a href="https://github.com/Teemperor">Teemperor</a> implemented CMake support and lcov integration, realized escape and Unicode handling in the string parser, and fixed the JSON serialization.</li>
  <li><a href="https://github.com/elliotgoodrich">elliotgoodrich</a> fixed an issue with double deletion in the iterator classes.</li>
  <li><a href="https://github.com/kirkshoop">kirkshoop</a> made the iterators of the class composable to other libraries.</li>
  <li><a href="https://github.com/wanwc">wancw</a> fixed a bug that hindered the class to compile with Clang.</li>
  <li>Tomas Åblad found a bug in the iterator implementation.</li>
  <li><a href="https://github.com/jrandall">Joshua C. Randall</a> fixed a bug in the floating-point serialization.</li>
  <li><a href="https://github.com/aburgh">Aaron Burghardt</a> implemented code to parse streams incrementally. Furthermore, he greatly improved the parser class by allowing the definition of a filter function to discard undesired elements while parsing.</li>
  <li><a href="https://github.com/dkopecek">Daniel Kopeček</a> fixed a bug in the compilation with GCC 5.0.</li>
  <li><a href="https://github.com/Florianjw">Florian Weber</a> fixed a bug in and improved the performance of the comparison operators.</li>
  <li><a href="https://github.com/EricMCornelius">Eric Cornelius</a> pointed out a bug in the handling with NaN and infinity values. He also improved the performance of the string escaping.</li>
  <li><a href="https://github.com/likebeta">易思龙</a> implemented a conversion from anonymous enums.</li>
  <li><a href="https://github.com/kepkin">kepkin</a> patiently pushed forward the support for Microsoft Visual studio.</li>
  <li><a href="https://github.com/gregmarr">gregmarr</a> simplified the implementation of reverse iterators and helped with numerous hints and improvements. In particular, he pushed forward the implementation of user-defined types.</li>
  <li><a href="https://github.com/caiovlp">Caio Luppi</a> fixed a bug in the Unicode handling.</li>
  <li><a href="https://github.com/dariomt">dariomt</a> fixed some typos in the examples.</li>
  <li><a href="https://github.com/d-frey">Daniel Frey</a> cleaned up some pointers and implemented exception-safe memory allocation.</li>
  <li><a href="https://github.com/ColinH">Colin Hirsch</a> took care of a small namespace issue.</li>
  <li><a href="https://github.com/whoshuu">Huu Nguyen</a> correct a variable name in the documentation.</li>
  <li><a href="https://github.com/silverweed">Silverweed</a> overloaded <code class="highlighter-rouge">parse()</code> to accept an rvalue reference.</li>
  <li><a href="https://github.com/dariomt">dariomt</a> fixed a subtlety in MSVC type support and implemented the <code class="highlighter-rouge">get_ref()</code> function to get a reference to stored values.</li>
  <li><a href="https://github.com/ZahlGraf">ZahlGraf</a> added a workaround that allows compilation using Android NDK.</li>
  <li><a href="https://github.com/whackashoe">whackashoe</a> replaced a function that was marked as unsafe by Visual Studio.</li>
  <li><a href="https://github.com/406345">406345</a> fixed two small warnings.</li>
  <li><a href="https://github.com/glenfe">Glen Fernandes</a> noted a potential portability problem in the <code class="highlighter-rouge">has_mapped_type</code> function.</li>
  <li><a href="https://github.com/nibroc">Corbin Hughes</a> fixed some typos in the contribution guidelines.</li>
  <li><a href="https://github.com/twelsby">twelsby</a> fixed the array subscript operator, an issue that failed the MSVC build, and floating-point parsing/dumping. He further added support for unsigned integer numbers and implemented better roundtrip support for parsed numbers.</li>
  <li><a href="https://github.com/vog">Volker Diels-Grabsch</a> fixed a link in the README file.</li>
  <li><a href="https://github.com/msm-">msm-</a> added support for american fuzzy lop.</li>
  <li><a href="https://github.com/Annihil">Annihil</a> fixed an example in the README file.</li>
  <li><a href="https://github.com/Themercee">Themercee</a> noted a wrong URL in the README file.</li>
  <li><a href="https://github.com/lv-zheng">Lv Zheng</a> fixed a namespace issue with <code class="highlighter-rouge">int64_t</code> and <code class="highlighter-rouge">uint64_t</code>.</li>
  <li><a href="https://github.com/abc100m">abc100m</a> analyzed the issues with GCC 4.8 and proposed a <a href="https://github.com/nlohmann/json/pull/212">partial solution</a>.</li>
  <li><a href="https://github.com/zewt">zewt</a> added useful notes to the README file about Android.</li>
  <li><a href="https://github.com/robertmrk">Róbert Márki</a> added a fix to use move iterators and improved the integration via CMake.</li>
  <li><a href="https://github.com/ChrisKitching">Chris Kitching</a> cleaned up the CMake files.</li>
  <li><a href="https://github.com/06needhamt">Tom Needham</a> fixed a subtle bug with MSVC 2015 which was also proposed by <a href="https://github.com/Epidal">Michael K.</a>.</li>
  <li><a href="https://github.com/thelostt">Mário Feroldi</a> fixed a small typo.</li>
  <li><a href="https://github.com/duncanwerner">duncanwerner</a> found a really embarrassing performance regression in the 2.0.0 release.</li>
  <li><a href="https://github.com/dtoma">Damien</a> fixed one of the last conversion warnings.</li>
  <li><a href="https://github.com/t-b">Thomas Braun</a> fixed a warning in a test case.</li>
  <li><a href="https://github.com/theodelrieu">Théo DELRIEU</a> patiently and constructively oversaw the long way toward <a href="https://github.com/nlohmann/json/issues/290">iterator-range parsing</a>. He also implemented the magic behind the serialization/deserialization of user-defined types.</li>
  <li><a href="https://github.com/5tefan">Stefan</a> fixed a minor issue in the documentation.</li>
  <li><a href="https://github.com/vasild">Vasil Dimov</a> fixed the documentation regarding conversions from <code class="highlighter-rouge">std::multiset</code>.</li>
  <li><a href="https://github.com/ChristophJud">ChristophJud</a> overworked the CMake files to ease project inclusion.</li>
  <li><a href="https://github.com/vpetrigo">Vladimir Petrigo</a> made a SFINAE hack more readable and added Visual Studio 17 to the build matrix.</li>
  <li><a href="https://github.com/seeekr">Denis Andrejew</a> fixed a grammar issue in the README file.</li>
  <li><a href="https://github.com/palacaze">Pierre-Antoine Lacaze</a> found a subtle bug in the <code class="highlighter-rouge">dump()</code> function.</li>
  <li><a href="https://github.com/TurpentineDistillery">TurpentineDistillery</a> pointed to <a href="http://en.cppreference.com/w/cpp/locale/locale/classic"><code class="highlighter-rouge">std::locale::classic()</code></a> to avoid too much locale joggling, found some nice performance improvements in the parser, improved the benchmarking code, and realized locale-independent number parsing and printing.</li>
  <li><a href="https://github.com/cgzones">cgzones</a> had an idea how to fix the Coverity scan.</li>
  <li><a href="https://github.com/jaredgrubb">Jared Grubb</a> silenced a nasty documentation warning.</li>
  <li><a href="https://github.com/qwename">Yixin Zhang</a> fixed an integer overflow check.</li>
  <li><a href="https://github.com/Bosswestfalen">Bosswestfalen</a> merged two iterator classes into a smaller one.</li>
  <li><a href="https://github.com/Daniel599">Daniel599</a> helped to get Travis execute the tests with Clang’s sanitizers.</li>
  <li><a href="https://github.com/vjon">Jonathan Lee</a> fixed an example in the README file.</li>
  <li><a href="https://github.com/gnzlbg">gnzlbg</a> supported the implementation of user-defined types.</li>
  <li><a href="https://github.com/qis">Alexej Harm</a> helped to get the user-defined types working with Visual Studio.</li>
  <li><a href="https://github.com/jaredgrubb">Jared Grubb</a> supported the implementation of user-defined types.</li>
  <li><a href="https://github.com/EnricoBilla">EnricoBilla</a> noted a typo in an example.</li>
  <li><a href="https://github.com/horenmar">Martin Hořeňovský</a> found a way for a 2x speedup for the compilation time of the test suite.</li>
  <li><a href="https://github.com/ukhegg">ukhegg</a> found proposed an improvement for the examples section.</li>
  <li><a href="https://github.com/rswanson-ihi">rswanson-ihi</a> noted a typo in the README.</li>
  <li><a href="https://github.com/stanmihai4">Mihai Stan</a> fixed a bug in the comparison with <code class="highlighter-rouge">nullptr</code>s.</li>
  <li><a href="https://github.com/tusharpm">Tushar Maheshwari</a> added <a href="https://github.com/sakra/cotire">cotire</a> support to speed up the compilation.</li>
  <li><a href="https://github.com/TedLyngmo">TedLyngmo</a> noted a typo in the README, removed unnecessary bit arithmetic, and fixed some <code class="highlighter-rouge">-Weffc++</code> warnings.</li>
  <li><a href="https://github.com/krzysztofwos">Krzysztof Woś</a> made exceptions more visible.</li>
  <li><a href="https://github.com/ftillier">ftillier</a> fixed a compiler warning.</li>
  <li><a href="https://github.com/tinloaf">tinloaf</a> made sure all pushed warnings are properly popped.</li>
  <li><a href="https://github.com/Fytch">Fytch</a> found a bug in the documentation.</li>
  <li><a href="https://github.com/Type1J">Jay Sistar</a> implemented a Meson build description.</li>
  <li><a href="https://github.com/HenryRLee">Henry Lee</a> fixed a warning in ICC and improved the iterator implementation.</li>
  <li><a href="https://github.com/vthiery">Vincent Thiery</a> maintains a package for the Conan package manager.</li>
  <li><a href="https://github.com/koemeet">Steffen</a> fixed a potential issue with MSVC and <code class="highlighter-rouge">std::min</code>.</li>
  <li><a href="https://github.com/Chocobo1">Mike Tzou</a> fixed some typos.</li>
  <li><a href="https://github.com/amrcode">amrcode</a> noted a missleading documentation about comparison of floats.</li>
  <li><a href="https://github.com/olegendo">Oleg Endo</a> reduced the memory consumption by replacing <code class="highlighter-rouge">&lt;iostream&gt;</code> with <code class="highlighter-rouge">&lt;iosfwd&gt;</code>.</li>
  <li><a href="https://github.com/dan-42">dan-42</a> cleaned up the CMake files to simplify including/reusing of the library.</li>
  <li><a href="https://github.com/himikof">Nikita Ofitserov</a> allowed for moving values from initializer lists.</li>
  <li><a href="https://github.com/wincent">Greg Hurrell</a> fixed a typo.</li>
  <li><a href="https://github.com/DmitryKuk">Dmitry Kukovinets</a> fixed a typo.</li>
  <li><a href="https://github.com/kbthomp1">kbthomp1</a> fixed an issue related to the Intel OSX compiler.</li>
  <li><a href="https://github.com/daixtrose">Markus Werle</a> fixed a typo.</li>
  <li><a href="https://github.com/WebProdPP">WebProdPP</a> fixed a subtle error in a precondition check.</li>
</ul>

<p>Thanks a lot for helping out! Please <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#109;&#097;&#105;&#108;&#064;&#110;&#108;&#111;&#104;&#109;&#097;&#110;&#110;&#046;&#109;&#101;">let me know</a> if I forgot someone.</p>

<h2 id="used-third-party-tools">Used third-party tools</h2>

<p>The library itself contains of a single header file licensed under the MIT license. However, it is built, tested, documented, and whatnot using a lot of third-party tools and services. Thanks a lot!</p>

<ul>
  <li><a href="http://lcamtuf.coredump.cx/afl/"><strong>American fuzzy lop</strong></a> for fuzz testing</li>
  <li><a href="https://www.appveyor.com"><strong>AppVeyor</strong></a> for <a href="https://ci.appveyor.com/project/nlohmann/json">continuous integration</a> on Windows</li>
  <li><a href="http://astyle.sourceforge.net"><strong>Artistic Style</strong></a> for automatic source code identation</li>
  <li><a href="https://github.com/sbs-ableton/benchpress"><strong>benchpress</strong></a> to benchmark the code</li>
  <li><a href="https://github.com/philsquared/Catch"><strong>Catch</strong></a> for the unit tests</li>
  <li><a href="http://clang.llvm.org"><strong>Clang</strong></a> for compilation with code sanitizers</li>
  <li><a href="https://cmake.org"><strong>Cmake</strong></a> for build automation</li>
  <li><a href="https://www.codacy.com"><strong>Codacity</strong></a> for further <a href="https://www.codacy.com/app/nlohmann/json">code analysis</a></li>
  <li><a href="https://github.com/sakra/cotire"><strong>cotire</strong></a> to speed of compilation</li>
  <li><a href="https://coveralls.io"><strong>Coveralls</strong></a> to measure <a href="https://coveralls.io/github/nlohmann/json">code coverage</a></li>
  <li><a href="https://scan.coverity.com"><strong>Coverity Scan</strong></a> for <a href="https://scan.coverity.com/projects/nlohmann-json">static analysis</a></li>
  <li><a href="http://cppcheck.sourceforge.net"><strong>cppcheck</strong></a> for static analysis</li>
  <li><a href="https://github.com/jarro2783/cxxopts"><strong>cxxopts</strong></a> to let benchpress parse command-line parameters</li>
  <li><a href="http://www.stack.nl/~dimitri/doxygen/"><strong>Doxygen</strong></a> to generate <a href="https://nlohmann.github.io/json/">documentation</a></li>
  <li><a href="https://github.com/rstacruz/git-update-ghpages"><strong>git-update-ghpages</strong></a> to upload the documentation to gh-pages</li>
  <li><a href="https://github.com/skywinder/github-changelog-generator"><strong>Github Changelog Generator</strong></a> to generate the <a href="https://github.com/nlohmann/json/blob/develop/ChangeLog.md">ChangeLog</a></li>
  <li><a href="http://llvm.org/docs/LibFuzzer.html"><strong>libFuzzer</strong></a> to implement fuzz testing for OSS-Fuzz</li>
  <li><a href="https://github.com/google/oss-fuzz"><strong>OSS-Fuzz</strong></a> for continuous fuzz testing of the library</li>
  <li><a href="https://github.com/nlohmann/json/blob/develop/doc/scripts/send_to_wandbox.py"><strong>send_to_wandbox</strong></a> to send code examples to <a href="http://melpon.org/wandbox">Wandbox</a></li>
  <li><a href="https://travis-ci.org"><strong>Travis</strong></a> for <a href="https://travis-ci.org/nlohmann/json">continuous integration</a> on Linux and macOS</li>
  <li><a href="http://valgrind.org"><strong>Valgrind</strong></a> to check for correct memory management</li>
  <li><a href="http://melpon.org/wandbox"><strong>Wandbox</strong></a> for <a href="http://melpon.org/wandbox/permlink/4NEU6ZZMoM9lpIex">online examples</a></li>
</ul>

<h2 id="projects-using-json-for-modern-c">Projects using JSON for Modern C++</h2>

<p>The library is currently used in Apple macOS Sierra and iOS 10. I am not sure what they are using the library for, but I am happy that it runs on so many devices.</p>

<h2 id="notes">Notes</h2>

<ul>
  <li>The code contains numerous debug <strong>assertions</strong> which can be switched off by defining the preprocessor macro <code class="highlighter-rouge">NDEBUG</code>, see the <a href="http://en.cppreference.com/w/cpp/error/assert">documentation of <code class="highlighter-rouge">assert</code></a>. In particular, note <a href="https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a2e26bd0b0168abb61f67ad5bcd5b9fa1.html#a2e26bd0b0168abb61f67ad5bcd5b9fa1"><code class="highlighter-rouge">operator[]</code></a> implements <strong>unchecked access</strong> for const objects: If the given key is not present, the behavior is undefined (think of a dereferenced null pointer) and yields an <a href="https://github.com/nlohmann/json/issues/289">assertion failure</a> if assertions are switched on. If you are not sure whether an element in an object exists, use checked access with the <a href="https://nlohmann.github.io/json/classnlohmann_1_1basic__json_a674de1ee73e6bf4843fc5dc1351fb726.html#a674de1ee73e6bf4843fc5dc1351fb726"><code class="highlighter-rouge">at()</code> function</a>.</li>
  <li>As the exact type of a number is not defined in the <a href="http://rfc7159.net/rfc7159">JSON specification</a>, this library tries to choose the best fitting C++ number type automatically. As a result, the type <code class="highlighter-rouge">double</code> may be used to store numbers which may yield <a href="https://github.com/nlohmann/json/issues/181"><strong>floating-point exceptions</strong></a> in certain rare situations if floating-point exceptions have been unmasked in the calling code. These exceptions are not caused by the library and need to be fixed in the calling code, such as by re-masking the exceptions prior to calling library functions.</li>
  <li>The library supports <strong>Unicode input</strong> as follows:
    <ul>
      <li>Only <strong>UTF-8</strong> encoded input is supported which is the default encoding for JSON according to <a href="http://rfc7159.net/rfc7159#rfc.section.8.1">RFC 7159</a>.</li>
      <li>Other encodings such as Latin-1, UTF-16, or UTF-32 are not supported and will yield parse errors.</li>
      <li><a href="http://www.unicode.org/faq/private_use.html#nonchar1">Unicode noncharacters</a> will not be replaced by the library.</li>
      <li>Invalid surrogates (e.g., incomplete pairs such as <code class="highlighter-rouge">\uDEAD</code>) will yield parse errors.</li>
      <li>The strings stored in the library are UTF-8 encoded. When using the default string type (<code class="highlighter-rouge">std::string</code>), note that its length/size functions return the number of stored bytes rather than the number of characters or glyphs.</li>
    </ul>
  </li>
  <li>The code can be compiled without C++ <strong>runtime type identification</strong> features; that is, you can use the <code class="highlighter-rouge">-fno-rtti</code> compiler flag.</li>
  <li><strong>Exceptions</strong> are used widely within the library. They can, however, be switched off with either using the compiler flag <code class="highlighter-rouge">-fno-exceptions</code> or by defining the symbol <code class="highlighter-rouge">JSON_NOEXCEPTION</code>. In this case, exceptions are replaced by an <code class="highlighter-rouge">abort()</code> call.</li>
  <li>By default, the library does not preserve the <strong>insertion order of object elements</strong>. This is standards-compliant, as the <a href="https://tools.ietf.org/html/rfc7159.html">JSON standard</a> defines objects as “an unordered collection of zero or more name/value pairs”. If you do want to preserve the insertion order, you can specialize the object type with containers like <a href="https://github.com/Tessil/ordered-map"><code class="highlighter-rouge">tsl::ordered_map</code></a> or <a href="https://github.com/nlohmann/fifo_map"><code class="highlighter-rouge">nlohmann::fifo_map</code></a>.</li>
</ul>

<h2 id="execute-unit-tests">Execute unit tests</h2>

<p>To compile and run the tests, you need to execute</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>make json_unit -Ctest
<span class="gp">$ </span>./test/json_unit <span class="s2">"*"</span>

<span class="o">===============================================================================</span>
All tests passed <span class="o">(</span>14504461 assertions <span class="k">in </span>48 <span class="nb">test </span>cases<span class="o">)</span>
</code></pre>
</div>

<p>Alternatively, you can use <a href="https://cmake.org">CMake</a> and run</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mkdir build
<span class="nb">cd </span>build
cmake ..
make
ctest
</code></pre>
</div>

<p>For more information, have a look at the file <a href="https://github.com/nlohmann/json/blob/master/.travis.yml">.travis.yml</a>.</p>



                </div>
            </div>
        </div>
        <div class="row">
            <div class="blue-divider"></div>
<footer>
    <div class="container-fluid">
        <div class="row">
    <div class="col-sm-9">
        <h1>More Resources</h1>
        <div class="row">
            <div class="col-sm-4">
                <h2>General</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/">AGL Developer Community</a>
                    </li>
                    <li>
                        <a href="https://www.automotivelinux.org/software/download/">Download Distribution</a>
                    </li>
                    <li>
                        <a href="https://gerrit.automotivelinux.org/gerrit/#/admin/projects/">Source Code on Git</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://lists.linuxfoundation.org/mailman/listinfo/automotive-discussions">Mailing List</a>
                    </li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Development</h2>
                <ul class="nav">
                    <li><a target="_blank" href="https://wiki.automotivelinux.org/agl-distro/source-code">Source Code</a></li>
                    <li><a target="_blank" href="https://jira.automotivelinux.org/browse/SPEC/?selectedTab=com.atlassian.jira.jira-projects-plugin:summary-panel">Issue Tracker</a></li>
                    <li><a target="_blank" href="https://wiki.automotivelinux.org/">Wiki</a></li>
                    <li><a href="https://www.automotivelinux.org/contact">Contact</a></li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Automotive Grade Linux @ Linux Foundation</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/">About AGL</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://www.linuxfoundation.org/">About Linux Foundation</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://wiki.automotivelinux.org/start/getting-started">Join AGL community</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/about/members">Members</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-sm-3">
        <h1>Contribute</h1>
        <p style="padding-top:20px"><strong>Help AGL move forward!</strong></p>
        <p>Report bugs, improve the docs, or contribute to the code.</p>
        <a href="/guppy/contribute" class="btn btn-lg btn-primary">
            Learn More
        </a>
        <p style="padding-top:20px"> <a href="https://twitter.com/autogradelinux" class="twitter-follow-button" data-show-count="false">Follow @autogradelinux</a></p>
    </div>
</div>
<div class="row">
	<div class="col-sm-9">
		<p class="copyright_text">
			Copyright &copy; 2015-2018 Automotive Grade Linux Documentation, Licensed under the <a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
			<br/>
			Automotive Grade Linux and logos are <a target="_blank" href="http://www.linuxfoundation.org">trademarks</a> of The Linux Foundation.
			<br/>
			Initial site design from <a href="https://cordova.apache.org/">Cordova website.</a> - warm thanks !
		</p>
	</div>
    <div class="col-sm-3">
		<small class="stats">Page rendered at:  2019-03-09 07:55:04 +0000</small>
		
		<br/><small class="stats"><a href="https://git.automotivelinux.org/src/libafb-helpers/plain/docs/json.md?h=guppy">Link to source document</small>
		
	</div>
</div>

    </div>
</footer>

        </div>
    </div>
</div>

<script defer type="text/javascript" src="/guppy/static/js/lib/toc.min.js"></script>
<script defer type="text/javascript" src="/guppy/static/js/docs.js"></script>

    <script defer type="text/javascript" src="/guppy/static/js/twitter.js"></script>
    



<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
    docsearch({
        apiKey: 'edd30bcff9f6df4b095c41cba3e5a418',
        indexName: 'automotivelinux',
        inputSelector: '#header-search-field',
    });
</script>

            
    

</body>
</html>
